
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/facelet-template.xhtml">

	<ui:define name="pageTitle">Find Flights</ui:define>
	<ui:define name="pageContent">

		<h:form>
			<!-- 		RADIO BUTTON  -->
			<div id="oneWayFrame">
				<h:panelGrid columns="2">
					<p:selectOneRadio id="toggleReturn"
						value="#{searchFlightBean.oneWay}">
						<f:selectItem itemLabel="One way" itemValue="true" />
						<f:selectItem id="return" itemLabel="Return" itemValue="false" />
						<f:ajax render="returnDate" />
					</p:selectOneRadio>
				</h:panelGrid>
			</div>


			<!-- 		LOCATION SELECTION  -->
			<div id="searchframe">
				<h:panelGrid columns="4">
					<p:outputLabel for="departureLocation" value="From" />
					<p:autoComplete id="departureLocation"
						value="#{flightBean.fromLocation}"
						completeMethod="#{flightBean.completeLocation}" var="fromLocation"
						itemValue="#{fromLocation}">
						<p:watermark for="departureLocation" value="Departure"
							id="departureWm" />
					</p:autoComplete>
					<p:outputLabel for="arrivalLocation" value="To" />
					<p:autoComplete id="arrivalLocation"
						value="#{flightBean.toLocation}"
						completeMethod="#{flightBean.completeLocation()}">
						<p:watermark for="arrivalLocation" value="Arrival" id="arrivalWm" />
					</p:autoComplete>

					<p:outputLabel for="departureDate" value="Departure" />
					<p:calendar id="departureDate"
						value="#{calendarView.departureDate}" pages="2" effect="fold"
						placeholder="Enter date" />

					<p:outputLabel for="returnDate" value="Return" />
					<p:calendar id="returnDate" value="#{calendarView.returnDate}"
						pages="2" disabled="#{searchFlightBean.oneWay}" effect="fold"
						placeholder="Enter date" />
				</h:panelGrid>


				<!-- 		SEARCH and RESET BUTTON  -->
				<p:panelGrid columns="2">
					<div id="searchButtons">
						<p:commandButton styleClass="btn_style" id="submitButton"
							actionListener="#{flightBean.submitAction}" value="Find"
							update="resultTable" icon="ui-icon-search">
							<f:ajax />
						</p:commandButton>
						<p:commandButton id="resetButton"
							actionListener="#{flightBean.resetAction}" value="Reset">
							<f:ajax />
						</p:commandButton>
					</div>
				</p:panelGrid>

				<!-- 		SEARCH RESULTS  -->
				<p:dataTable id="resultTable" var="flight"
					value="#{flightBean.filteredFlights}" selectionMode="single"
					rowKey="#{flight.id}" sortBy="#{flight.price}">
					<p:ajax event="rowSelect" listener="#{selectionBean.onRowSelect}">
					</p:ajax>
					<p:column headerText="Id" sortBy="#{flight.id}">
						<h:outputText value="#{flight.id}" />
					</p:column>
					<p:column headerText="From"
						sortBy="#{flight.departureLocation.country}">
						<h:outputText value="#{flight.departureLocation.country}" />
					</p:column>
					<p:column headerText="To"
						sortBy="#{flight.arrivalLocation.country}">
						<h:outputText value="#{flight.arrivalLocation.country}" />
					</p:column>
					<p:column headerText="Depart" sortBy="#{flight.departureTime}">
						<h:outputText value="#{flight.departureTime}" />
					</p:column>
					<p:column headerText="Arrive" sortBy="#{flight.arrivalTime}">
						<h:outputText value="#{flight.arrivalTime}" />
					</p:column>
					<p:column headerText="Price" sortBy="#{flight.price}">
						<h:outputText value="#{flight.price}" />
					</p:column>
				</p:dataTable>
			</div>
		</h:form>
	</ui:define>

</ui:composition>
</html>